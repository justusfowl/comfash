<ion-content >
    

  <div class="loading-icon-box">
    <div class="loading-icon">

    </div>
  </div>
  
    <ion-buttons class="btn-header">
      <button ion-button icon-only (click)="navBack()">
        <ion-icon name="arrow-back"></ion-icon>
      </button>
    </ion-buttons>
    <ion-row no-bounce no-scrolling id="row-compare-items"> 
      <ion-col col *ngFor="let session of api.compareSessions; let i = index;">
          <div class="video-container" [style.width]="(100 / api.compareSessions.length) + 'vw'" ion-long-press [interval]="400" (onPressStart)="pressed($event, session)" >

            <!--
            <video  preload="auto"  playsinline webkit-playsinline type="video/mp4" muted>
              <source src="https://player.vimeo.com/external/85569724.sd.mp4?s=43df5df0d733011263687d20a47557e4">
            </video>
            -->
            <div class="disable-session">
                <button class="disable-session-btn" ion-button icon-only (click)="api.toggleCompareSession(session)">
                    <ion-icon name="close" ></ion-icon>
                </button>
            </div>

            <video  class="video-background" autoplay preload="auto" playsinline webkit-playsinline  [poster]="config.getHostBase() + session.getThumbnail()" [src]="config.getHostBase() + session.getSessionItemPath()" type="video/mp4"></video>
          
            <!--
            <div class="tmp-no">
              % {{prcSessionItem}}, sess # {{session.getId()}} 
            </div>
          -->

            <ion-grid class="session-details">
              <ion-row>
                <ion-col col-4>
                    <button class="session-menu-btn" [class.active]="enableCommentList"  [hidden]="session.getCommentsDisplay(prcSessionItem).length == 0"  (click)="enableComments(i)"  ion-button icon-left clear small>
                        
                        <font class="no-comments"  >{{session.getCommentsDisplay(prcSessionItem).length}}</font>
                        <ion-icon name="chatboxes"  class="bookmark-icon" ></ion-icon>
                    </button>    

                </ion-col>

                <ion-col>
                </ion-col>

                <ion-col col-4 class="voting-btn">
                    <button class="session-menu-btn right" [class.active]="session.myVote" ion-long-press [interval]="400" (click)="showReactions($event, session)"  ion-button icon-left clear small>
                        <div class="emoticons session-menu-btn-inner">
                            {{getMyVoteIcon(session)}}
                        </div>  
                      </button>
                  </ion-col>
              </ion-row>
            </ion-grid>

            <div class="compare-pic-comment" *ngFor="let comment of session.comments" (click)="selectComment(i, comment)" [class.active]="checkCommentActive(comment)" [hidden]="comment.calculateDisplay(prcSessionItem)" [style]="sanitizer.bypassSecurityTrustStyle(comment.getScalledCommentPos('row-compare-items',session))" >
            </div>

          </div>
      </ion-col>
    </ion-row>
    <ion-list id="comment-list" class="comment-list" >
        <div [id]="'comment-list_' + comment.getId()" class="comment-list-item" *ngFor="let comment of getCommentsForSelectedSession();" [hidden]="comment.calculateDisplay(prcSessionItem)" (click)="highlightComment(comment)">
                {{comment.commentText}}
                <div class="comment-list-item-detail">
                  {{comment.getUsername()}}, {{util.formatDateDiffToNow(comment.getDate())}}
                </div>
        </div>
    </ion-list>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <div class="hanger-container">
        <div *ngFor="let hanger of calculateFooterHangers();" class="flag-comment" [style.left]='hanger.orderPrc + "%"'></div>
    </div>
      <ion-range class="session-slider" (ionChange)="slide($event)" [(ngModel)]="prcSessionItem" min="0" max="100" ratio="true" color="danger" pin="false"></ion-range>
  </ion-toolbar>

</ion-footer>